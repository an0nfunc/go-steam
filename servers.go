package steam

import (
	"math/rand"
	"time"

	"github.com/anonfunc/go-steam/v3/netutil"
)

// CMServers contains a list of worlwide servers
var CMServers = []string{
	"162.254.197.39:27019",
	"155.133.226.78:27018",
	"162.254.197.39:27017",
	"155.133.226.78:27017",
	"155.133.226.75:27027",
	"162.254.197.39:27020",
	"155.133.226.75:27021",
	"162.254.197.54:27027",
	"162.254.197.39:27023",
	"162.254.197.39:27018",
	"162.254.197.54:27022",
	"162.254.197.54:27019",
	"155.133.226.78:27026",
	"162.254.197.39:27021",
	"155.133.226.78:27022",
	"155.133.226.75:27023",
	"162.254.197.54:27026",
	"162.254.197.54:27018",
	"162.254.197.39:27025",
	"155.133.226.75:27018",
	"162.254.197.54:27023",
	"155.133.226.75:27022",
	"155.133.226.75:27019",
	"155.133.226.75:27025",
	"162.254.197.54:27020",
	"162.254.197.54:27021",
	"162.254.197.39:27024",
	"162.254.197.39:27027",
	"162.254.197.54:27017",
	"155.133.226.78:27020",
	"155.133.226.75:27024",
	"155.133.226.75:27017",
	"162.254.197.39:27022",
	"155.133.226.78:27025",
	"155.133.226.78:27019",
	"162.254.197.54:27025",
	"162.254.197.54:27024",
	"155.133.226.75:27026",
	"155.133.226.78:27021",
	"155.133.226.78:27023",
	"155.133.226.75:27020",
	"155.133.226.78:27027",
	"162.254.197.39:27026",
	"155.133.226.78:27024",
	"162.254.198.44:27020",
	"155.133.252.54:27024",
	"162.254.198.44:27017",
	"162.254.198.104:27025",
	"155.133.252.39:27018",
	"162.254.198.104:27021",
	"162.254.198.104:27020",
	"162.254.198.44:27023",
	"155.133.252.54:27022",
	"155.133.252.54:27017",
	"155.133.252.54:27023",
	"155.133.252.54:27025",
	"155.133.252.39:27019",
	"162.254.198.104:27018",
	"162.254.198.44:27019",
	"162.254.198.44:27025",
	"162.254.198.104:27017",
	"162.254.198.104:27023",
	"155.133.252.39:27017",
	"162.254.198.44:27024",
	"155.133.252.54:27019",
	"162.254.198.44:27021",
	"155.133.252.39:27025",
	"162.254.198.44:27022",
	"162.254.198.104:27024",
	"155.133.252.39:27021",
	"155.133.252.39:27020",
	"162.254.198.44:27018",
	"162.254.198.104:27022",
	"155.133.252.39:27024",
	"155.133.252.54:27021",
	"155.133.252.54:27018",
	"155.133.252.39:27023",
	"162.254.198.104:27019",
	"155.133.252.54:27020",
	"155.133.252.39:27022",
	"185.25.182.76:27018",
	"185.25.182.77:27021",
	"155.133.248.38:27022",
	"185.25.182.76:27020",
	"185.25.182.77:27017",
	"155.133.248.39:27021",
	"185.25.182.77:27019",
	"185.25.182.76:27019",
	"185.25.182.76:27021",
	"185.25.182.77:27018",
	"185.25.182.77:27020",
	"155.133.248.39:27022",
	"155.133.248.38:27024",
	"155.133.248.39:27024",
	"155.133.248.38:27020",
	"155.133.248.38:27018",
	"155.133.248.39:27018",
	"155.133.248.38:27017",
	"155.133.248.38:27023",
	"155.133.248.39:27023",
}

// GetRandomCM returns a random server from a built-in IP list.
//
// Prefer Client.Connect(), which uses IPs from the Steam Directory,
// which is always more up-to-date.
func GetRandomCM() *netutil.PortAddr {
	rng := rand.New(rand.NewSource(time.Now().UnixNano()))
	addr := netutil.ParsePortAddr(CMServers[rng.Int31n(int32(len(CMServers)))])
	if addr == nil {
		panic("invalid address in CMServers slice")
	}
	return addr
}
